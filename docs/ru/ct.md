# ct

`ct` — это игровой движок, включающий "ядро", расширяемое модулями. Давайте сначала немного поговорим, как оно работает.

## Последовательность событий

События всегда выполняются в определённом порядке:

1. событие `oncreate` (код создания) у комнаты, которое вызывается, когда пользователь запускает игру или переходит в новую комнату;
1. событие `oncreate` у копий;
1. затем начинает работать игровой цикл:
    1. сначала `onstep` (событие «Кадр») применяется ко всем копиям;
    1. после применяется `onstep` для самой комнаты;
    1. вызывается `ondestroy` (код уничтожения) для тех копий, которые нужно уничтожить (у которых отмечен параметр `kill`);
    1. происходит пересортировка копий;
    1. вызывается `ondraw` (событие «Прорисовка») для всех копий;
    1. `ondraw` вызывается для самой комнаты;
    1. события ввода сбрасывается. Ожидание нового кадра.
1. Когда игрок переходит в новую комнату, вызывается событие `onleave` для последней комнаты.

## Методы и параметры

### `ct.pixiApp`

[Приложение Pixi.js](https://pixijs.download/release/docs/PIXI.Application.html) этой игры.

### `ct.stage`

Корневая [сцена игры](https://pixijs.download/release/docs/PIXI.Application.html#stage).

### `ct.meta`

Содержит метаданные игры, установленные в ct.IDE, напр. поля `author`, `site`, `version`, `name`.

### `ct.delta`

Мультипликатор, показывающий, как много времени прошло с последнего кадра. Он будет меняться в зависимости от производительности игры. Например, `ct.delta` будет равен `2` при 30 кадров/сек, если целевой FPS — 60, и будет близок к `1` при плавном фреймрейте.

Вы можете использовать `ct.delta` для реализации движения, чтобы копии двигались равномерно при любой частоте кадров, например:

```js
this.x += 10 * ct.delta;
```

Тем не менее, этот параметр в основном полезен при разработке сложных или логически управляемых движений, так как [стандартная система передвижения](/ct.types.html#moving-copies-around) и так учитывает `ct.delta`.